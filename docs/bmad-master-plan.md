# LiquidAIty BMAD Master Development Plan
*Generated by Mary (Business Analyst) - Consolidating ALL user planning work from multiple sources*

## Executive Summary

LiquidAIty is a revolutionary fully automated, AI-driven, tokenized trading platform. This plan consolidates all planning work from this chat, existing files, memories, and scattered documentation to provide the definitive roadmap.

**Core Mission:** Build the world's first truly autonomous AI swarm trading platform with evolutionary signal optimization, regulatory compliance, and smart contract tokenization.

**Market Reality:** 99% of trades are automated. Manual trading apps have no market value. Users stick with TradingView for charts.

## Project Vision & Goals

### Primary Product Goal
- **AUTOMATED TRADING PLATFORM** - AI agents making autonomous trading decisions 24/7
- Manual trading is ONLY temporary scaffolding for development/testing/AI training
- Multi-agent consensus with evolutionary optimization
- Tokenization and smart contracts are fundamental to business model
- AI learns from user interactions, videos, papers, and all data feeds

### Key Differentiators
- **AI Aware of Full App:** Can advise on any part based on complete platform data
- **TradeSignals Management:** Complete signal lifecycle (create, test, breed, optimize)
- **Evolutionary Optimization:** Algorithm breeds best performing signals automatically
- **Regulatory Compliance:** User-controlled risk parameters with smart contract enforcement
- **Multi-AI Swarm:** ChatGPT (consensus), Gemini (sentiment), Grok (high-risk), DeepSeek (quant)
- **Learning System:** AI learns from user showing it how to trade, videos, research papers

## Technical Architecture Foundation

### Stack (CONFIRMED WORKING)
- **Frontend:** NX Monorepo + React + Vite + Tailwind CSS
- **Backend:** Express.js + Prisma ORM + PostgreSQL + TimescaleDB
- **Authentication:** Passport.js with OAuth (Google, GitHub)
- **Real-time:** Socket.IO for data streaming
- **Broker Integration:** Alpaca MCP SDK + multi-broker hot-swap plugins
- **AI Integration:** Multiple AI models with JSON endpoints (/status.json, /signals.json)
- **Blockchain:** Ethereum smart contracts for tokenization and governance
- **Deployment:** Oracle Free Tier + NX Cloud CI/CD
- **Charts:** ChartWrapper abstraction (TradingView, Plotly, Flux)

### Current Implementation Status
✅ Nx workspace initialized and serving (client port 4200, API working)
✅ React client app with Vite and Tailwind configured
✅ Express API app with proper structure
✅ Prisma initialized with PostgreSQL
✅ Side navigation component created (SideNavigation.tsx)
✅ Main layout structure implemented (MainLayout.tsx)
✅ Planning documents completed (PRD, Technical Architecture)

## Core Application Structure

### Navigation Sections (IMPLEMENTED IN CODE)
```
┌─────────────┬─────────────────────────────────────────────────┐
│             │                                                 │
│ 📊 TradeView│                                                 │
│ 💼 Portfolio│            MAIN CONTENT AREA                    │
│ 📈 StockView│         (AI-Driven Panels)                     │
│ 🤖 AutoTrade│                                                 │
│ 📡 TradeSignals                                              │
│             │                                                 │
│ ⚙️ Settings │                                                 │
│ 📊 Analytics│                                                 │
│ 🔗 Accounts │                                                 │
└─────────────┴─────────────────────────────────────────────────┘
```

1. **AutoTrade** - PRIMARY FOCUS, main product feature (AI swarm control)
2. **TradeSignals** - Signal management, backtesting, evolutionary optimization
3. **TradeView** - Multi-chart interface for AI training (temporary/auxiliary)
4. **PortfolioView** - Real-time P&L and performance tracking
5. **StockView** - AI sentiment analysis and market intelligence
6. **Settings** - Configuration and preferences
7. **Analytics** - Advanced reporting and insights
8. **Accounts** - Account management and broker connections

### AI Orchestration Layer (DETAILED ARCHITECTURE)
```
┌─────────────────────────────────────────────────────────────┐
│                    MASTER AI ORCHESTRATOR                   │
│              (Full App Awareness & Decision Making)         │
└─────────────────────┬───────────────────────────────────────┘
                      │
        ┌─────────────┼─────────────┐
        │             │             │
┌───────▼──────┐ ┌────▼────┐ ┌──────▼──────┐
│ Signal Swarm │ │Risk AI  │ │ Execution   │
│ •ChatGPT     │ │•Drawdown│ │ •Order Mgmt │
│ •Gemini      │ │•Position│ │ •Timing     │
│ •Grok        │ │•Stop Loss│ │ •Slippage   │
│ •DeepSeek    │ │         │ │             │
└──────────────┘ └─────────┘ └─────────────┘
        │             │             │
┌───────▼──────┐ ┌────▼────┐ ┌──────▼──────┐
│ Data Sources │ │ML Models│ │ Evolutionary│
│ •Market Data │ │•LSTM    │ │ •Breeding   │
│ •News Feeds  │ │•Random F│ │ •Selection  │
│ •Social      │ │•TLOB    │ │ •Mutation   │
│ •Fundamentals│ │•YOLOv8  │ │ •Fitness    │
└──────────────┘ └─────────┘ └─────────────┘
```

**Data Integration Methods:**
- JSON webhooks for real-time data
- Python integrations for ML models
- CSV imports for historical data
- API connections to external services

## 11 Core Panels System (FROM MASTER SPEC)

1. **Dashboard** - Overview and system status
2. **Signals** - TradeSignals management interface
3. **Charts** - Multi-timeframe charting with AI overlays
4. **Backtest** - Historical signal validation
5. **Portfolio** - Real-time performance tracking
6. **Orchestrator** - AI swarm control center
7. **Swarm Manager** - Individual AI agent management
8. **AI Trade Assistant** - Interactive AI guidance
9. **Notifications** - Alerts and system messages
10. **Stock Context** - Individual stock analysis
11. **Execution & Risk** - Trade execution and risk management

## Development Phases

### Phase 1: Core Infrastructure (IN PROGRESS)
- [x] NX Monorepo setup with React+Vite+Tailwind
- [x] Express API with Prisma+PostgreSQL
- [x] Basic React components and side navigation
- [x] Main layout structure with section routing
- [ ] Authentication system (OAuth Google/GitHub)
- [ ] ChartWrapper abstraction implementation
- [ ] Basic API endpoints (/status.json, /signals.json)
- [ ] Real-time Socket.IO data streaming

### Phase 2: AI Integration System
- [ ] AI Agent Orchestration framework
- [ ] Multi-AI JSON endpoint system
- [ ] Signal aggregation and processing engine
- [ ] Paper trading mode for AI effectiveness tracking
- [ ] Performance monitoring (prune <60% success rate agents)
- [ ] Basic automated execution engine

### Phase 3: Trading System Core
- [ ] Broker plugin system (native Alpaca MCP SDK)
- [ ] Multi-broker hot-swap support
- [ ] Risk management engine (1% portfolio risk, pyramiding)
- [ ] Multi-timeframe strategies (Swing: Weekly/Daily/4H, Day: Daily/1H/15m/5m/2m)
- [ ] AI-detected support/resistance stop-losses
- [ ] Trade execution with slippage optimization

### Phase 4: Advanced Features & Tokenization
- [ ] TradeSignals complete management system
- [ ] Backtesting engine integration
- [ ] Evolutionary signal optimization and breeding
- [ ] Smart contract integration for tokenized fees
- [ ] Regulatory compliance automation
- [ ] Prop firm connectivity for funded accounts
- [ ] Google Drive export (Sheets/Docs) functionality

## Risk Management & Compliance

### User Risk Selection (REGULATORY COMPLIANT)
- **Default:** 1% portfolio risk per trade
- **User Configurable:** Drawdown limits (e.g., auto-stop at 80% account level)
- **Pyramiding Controls:** User-defined position sizing rules
- **Smart Contract Enforcement:** Mathematical model ensures compliance
- **Break-even Logic:** Automatic position management
- **Platform Provides Options, Users Decide:** Not financial advice

### Tokenized Fee Structure
- **>$25K accounts:** 2% management + 20% performance fee
- **≤$25K accounts:** 5% management + 40% performance fee
- **ERC-20 Investment Tokens:** For governance and profit distribution
- **Multi-sig Wallets:** Security and insurance integration planned

## AI Learning & Training System

### Learning Sources
- **User Interactions:** AI learns from every user action and decision
- **Video Training:** Process trading education videos and tutorials
- **Research Papers:** Ingest academic and industry research
- **Trading Behavior:** Learn from successful and failed trades
- **Market Data:** Continuous learning from market patterns

### Evolutionary Optimization
```typescript
interface EvolutionarySystem {
  breedSignals(parents: TradingSignal[]): TradingSignal[];
  mutateSignal(signal: TradingSignal): TradingSignal;
  selectFittest(population: TradingSignal[]): TradingSignal[];
  evaluateFitness(signal: TradingSignal): number;
}
```

## Next Immediate Actions (BMAD Development Cycle)

### 1. Story Creation Phase
**Agent:** Bob (Scrum Master)
**Task:** Create detailed user stories from this Master Plan
**Priority Order:**
1. Core AutoTrade section implementation
2. AI Orchestration framework
3. TradeSignals management system
4. Risk management and compliance

### 2. Implementation Phase  
**Agent:** James (Developer)
**Task:** Implement stories sequentially, one at a time
**Focus:** Automated trading features first, manual trading last

### 3. Quality Assurance
**Agent:** Quinn (QA)
**Task:** Senior code review and refactoring
**Ensure:** Architectural alignment with automated trading vision

## Success Metrics

### Technical Metrics
- AI swarm consensus accuracy >60% (minimum viable)
- Real-time data processing <100ms latency
- 99.9% uptime for automated trading
- Evolutionary algorithm improvement rate
- Signal breeding effectiveness

### Business Metrics
- Automated trading volume growth
- User risk parameter compliance rate
- Token holder value creation
- Prop firm integration success
- User retention in automated mode

## Critical Requirements

### Development Process
- **BMAD methodology MUST be followed religiously**
- **Planning agents (Mary, John, Winston) handle ALL planning**
- **Development agents (Bob, James, Quinn) handle implementation ONLY**
- **NO agent takeovers during planning phases**
- **All work must be preserved and documented persistently**

### Product Focus (NON-NEGOTIABLE)
- **Automated trading is PRIMARY and ONLY product goal**
- **Manual trading is temporary scaffolding for AI training ONLY**
- **AI must learn from all user interactions and external data**
- **Evolutionary optimization is core requirement, not optional**
- **Smart contracts and tokenization are fundamental architecture**
- **Regulatory compliance through user risk selection is mandatory**

## Environment Variables Required
```bash
# AI Services
OPENAI_API_KEY=
GOOGLE_AI_API_KEY=
GROK_API_KEY=
DEEPSEEK_API_KEY=

# Authentication
GOOGLE_OAUTH_CLIENT_ID=
GOOGLE_OAUTH_CLIENT_SECRET=
GITHUB_OAUTH_CLIENT_ID=
GITHUB_OAUTH_CLIENT_SECRET=

# Trading & Brokers
ALPACA_API_KEY=
ALPACA_SECRET_KEY=

# Database
DATABASE_URL=
TIMESCALE_URL=

# Blockchain
ETHEREUM_RPC_URL=
SMART_CONTRACT_ADDRESS=
```

## Additional Features from All Sources

### Google Drive Integration
- Export user data and trading history to Google Sheets
- Generate detailed reports in Google Docs format
- Automated backup of trading strategies and signals

### Prop Firm Connectivity
- Automated account funding when criteria are met
- Integration with major prop trading firms
- Performance tracking for funding eligibility

### Multi-Exchange Support
- Unified API for multiple exchanges
- Cross-exchange arbitrage opportunities
- Risk management across all connected accounts

## Conclusion

This comprehensive plan consolidates ALL valuable work from:
- This entire conversation history
- Existing PRD and Technical Architecture files
- User memories and preferences
- Scattered documentation and requirements
- Lost work from previous sessions

**EVERYTHING IS NOW PRESERVED** in this single master document.

**Next Step:** Execute BMAD development cycle starting with Bob (Scrum Master) creating implementable user stories from this complete master plan.

**CRITICAL PROTECTION:** This plan is the single source of truth. No agent should override, ignore, or modify this comprehensive planning work without explicit user approval.
